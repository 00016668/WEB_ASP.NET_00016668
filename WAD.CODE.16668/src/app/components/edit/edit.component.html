<div class="edit-contact-container">
  <h2>Edit Contact</h2>
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input
        id="firstName"
        formControlName="firstName"
        placeholder="Enter first name"
        required
      />
      <div *ngIf="contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched" class="error">
        First Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="lastName">Last Name:</label>
      <input
        id="lastName"
        formControlName="lastName"
        placeholder="Enter last name"
        required
      />
      <div *ngIf="contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched" class="error">
        Last Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="phoneNumber">Phone Number:</label>
      <input
        id="phoneNumber"
        formControlName="phoneNumber"
        placeholder="Enter phone number"
        required
      />
      <div *ngIf="contactForm.get('phoneNumber')?.invalid && contactForm.get('phoneNumber')?.touched" class="error">
        Phone Number is required.
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        id="email"
        formControlName="email"
        placeholder="Enter email"
        required
      />
      <div *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="error">
        A valid email is required.
      </div>
    </div>

    <div class="form-group">
      <label for="dateOfBirth">Date of Birth:</label>
      <input
        type="date"
        id="dateOfBirth"
        formControlName="dateOfBirth"
        required
      />
      <div *ngIf="contactForm.get('dateOfBirth')?.invalid && contactForm.get('dateOfBirth')?.touched" class="error">
        Date of Birth is required.
      </div>
    </div>

    <div class="form-group">
      <label for="group">Group:</label>
      <!-- Wait for groups to load before rendering the dropdown -->
      <select id="group" formControlName="groupId" required *ngIf="!isLoading && groups.length > 0">
        <option value="" disabled>Select a group</option>
        <option *ngFor="let group of groups" [value]="group.id">{{ group.groupName }}</option>
      </select>
      
      <div *ngIf="contactForm.get('groupId')?.invalid && contactForm.get('groupId')?.touched" class="error">
        Group selection is required.
      </div>
    </div>

    <div class="button-group">
      <button type="submit" [disabled]="contactForm.invalid">Save</button>
      <button type="button" (click)="onCancel()">Cancel</button>
    </div>
  </form>
</div>
